# –û–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ processing_edit_filter_properties.php

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç?

`processing_edit_filter_properties.php` ‚Äî —ç—Ç–æ **–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã** –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞** –≤ —Ç–∞–±–ª–∏—Ü–µ `salon_filter_structure`:
   - `box` ‚Äî –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ (–∫–æ—Ä–æ–±–∫–∞)
   - `insertion_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å—Ç–∞–≤–æ–∫
   - `g_box` ‚Äî –≥—Ä—É–ø–ø–æ–≤–∞—è —É–ø–∞–∫–æ–≤–∫–∞ (—è—â–∏–∫)
   - `side_type` ‚Äî –≤—ã—Å–æ—Ç–∞ –±–æ–∫–æ–≤–æ–π –ª–µ–Ω—Ç—ã
   - `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ñ–∏–ª—å—Ç—Ä–∞
   - `foam_rubber` ‚Äî –Ω–∞–ª–∏—á–∏–µ –ø–æ—Ä–æ–ª–æ–Ω–∞
   - `form_factor` ‚Äî —Ñ–æ—Ä–º-—Ñ–∞–∫—Ç–æ—Ä (—Ç—Ä–∞–ø–µ—Ü–∏—è)
   - `tail` ‚Äî –Ω–∞–ª–∏—á–∏–µ —è–∑—ã—á–∫–∞
   - `has_edge_cuts` ‚Äî –Ω–∞–ª–∏—á–∏–µ –Ω–∞–¥—Ä–µ–∑–æ–≤
   - `comment` ‚Äî –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
   - `tariff_id` ‚Äî —Ç–∞—Ä–∏—Ñ
   - `build_complexity` ‚Äî —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

2. **–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–æ—Ñ—Ä–æ–ø–∞–∫–µ—Ç–µ** –≤ —Ç–∞–±–ª–∏—Ü–µ `paper_package_salon`:
   - –í—ã—Å–æ—Ç–∞, —à–∏—Ä–∏–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–ª–∞–¥–æ–∫
   - –ü–æ—Å—Ç–∞–≤—â–∏–∫, –º–∞—Ç–µ—Ä–∏–∞–ª, –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

3. **–°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö)

4. **–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `COALESCE` –≤ SQL, —á—Ç–æ–±—ã –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

## üîó –ö—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç?

### –¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤:

```
main.php (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
    ‚Üì
    –ö–Ω–æ–ø–∫–∞ "–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞"
    ‚Üì
add_filter_properties_into_db.php (—Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    ‚Üì
    –§–æ—Ä–º–∞ —Å id="editForm" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å
    ‚Üì
processing_edit_filter_properties.php (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫)
    ‚Üì
    –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
    ‚Üì
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞
```

### –î–µ—Ç–∞–ª–∏:

1. **–ò–∑ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`main.php`):**
   ```php
   // –°—Ç—Ä–æ–∫–∞ 594-597
   <form action='add_filter_properties_into_db.php' method='post' target='_blank'>
       <input type='hidden' name='workshop' value='U5'>
       <input type='submit' value='–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞'>
   </form>
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞"** –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏"

2. **–í —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`add_filter_properties_into_db.php`):**
   ```php
   // –°—Ç—Ä–æ–∫–∞ 158
   <form id="editForm" action="processing_edit_filter_properties.php" method="post">
       <!-- –ü–æ–ª—è —Ñ–æ—Ä–º—ã -->
       <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
   </form>
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä –∏–∑ —Å–ø–∏—Å–∫–∞, –∑–∞–ø–æ–ª–Ω—è–µ—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–∏–º–∞–µ—Ç **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"**

3. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ (`processing_edit_filter_properties.php`):**
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `$_POST`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –≤ –ë–î
   - –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞ —Å –∫–Ω–æ–ø–∫–æ–π "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∏–ª—å—Ç—Ä"

## üë• –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç?

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã:**
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–∞–∑–¥–µ–ª—É "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫ —Ñ–∏–ª—å—Ç—Ä—É (—É–ø–∞–∫–æ–≤–∫–∞, –≤—Å—Ç–∞–≤–∫–∏ –∏ —Ç.–¥.)
- –ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ñ–∏–ª—å—Ç—Ä–∞

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
   - –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `COALESCE(NULLIF(?, ''), –ø–æ–ª–µ)` –≤ SQL
   - –ï—Å–ª–∏ –ø–æ–ª–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—É—Å—Ç—ã–º, —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
   - –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `restore_from_backup.php`

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä—ã)
   - –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª –¥–∞–Ω–Ω—ã–µ

## üìä –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`main.php`)
2. –í —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏" –Ω–∞–∂–∏–º–∞–µ—Ç **"–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞"**
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ (`add_filter_properties_into_db.php`)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–§–ü-001")
5. –ó–∞–ø–æ–ª–Ω—è–µ—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - –í—ã–±–∏—Ä–∞–µ—Ç –∫–æ—Ä–æ–±–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞
   - –£–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å—Ç–∞–≤–æ–∫
   - –í—ã–±–∏—Ä–∞–µ—Ç —è—â–∏–∫ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–π —É–ø–∞–∫–æ–≤–∫–∏
   - –ò —Ç.–¥.
6. –ù–∞–∂–∏–º–∞–µ—Ç **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"**
7. –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `processing_edit_filter_properties.php`
8. –°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
9. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∫—Ä–∏–ø—Ç?

### –ß–µ—Ä–µ–∑ –ª–æ–≥–∏ Apache:
```powershell
Select-String -Path 'C:\xampp\apache\logs\access.log' -Pattern 'processing_edit_filter_properties' | Select-Object -Last 50
```

### –ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π:
```sql
SELECT * FROM salon_filter_structure_backup 
ORDER BY backup_time DESC 
LIMIT 20;
```

### –ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É –ª–æ–≥–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞):
```sql
SELECT * FROM salon_filter_structure_change_log 
ORDER BY change_time DESC 
LIMIT 20;
```






