# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ò—Å—Ç–æ—Ä–∏—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –≥–æ—Ñ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —É—á–∞—Å—Ç–∫–æ–≤ –£2, –£3, –£5 –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–ª–∞–Ω–∞ –≥–æ—Ñ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–æ–ª–µ `history` —Ç–∞–±–ª–∏—Ü—ã `corrugation_plan` (–∏–ª–∏ `corrugation_plans` –¥–ª—è –£3) –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

```json
[
  {
    "date": "2025-11-13",
    "quantity": 50,
    "timestamp": "2025-11-13 14:30:25"
  },
  {
    "date": "2025-11-14",
    "quantity": 30,
    "timestamp": "2025-11-14 09:15:10"
  }
]
```

### 2. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –ö–æ–≥–¥–∞ –ø–æ–∑–∏—Ü–∏—è –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å:

1. –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π
2. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞:
   - –í—ã—á–∏—Å–ª—è–µ—Ç –¥–µ–ª—å—Ç—É (—Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –Ω–æ–≤—ã–º –∏ —Å—Ç–∞—Ä—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `fact_count`)
   - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `fact_count`

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–ª–∞–Ω: 100 —à—Ç
–§–∞–∫—Ç (–Ω–∞—á–∞–ª—å–Ω—ã–π): 0 —à—Ç
–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç: 100 —à—Ç

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏:
[
  {"date": "2025-11-13", "quantity": 100, "timestamp": "2025-11-13 16:00:00"}
]
```

#### –ö–æ–≥–¥–∞ –ø–æ–∑–∏—Ü–∏—è –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π:

1. **–î–µ–Ω—å 1:**
   - –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç —á–∞—Å—Ç–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50 –∏–∑ 100)
   - –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏

2. **–î–µ–Ω—å 2:**
   - –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç –æ–±—â–µ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80 –∏–∑ 100)
   - –°–∏—Å—Ç–µ–º–∞:
     - –í—ã—á–∏—Å–ª—è–µ—Ç –¥–µ–ª—å—Ç—É: 80 - 50 = 30
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–ø–∏—Å—å –∑–∞ —Å–µ–≥–æ–¥–Ω—è
     - –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å –¥–∞—Ç–æ–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º 30
     - –ï—Å–ª–∏ –µ—Å—Ç—å - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å

3. **–î–µ–Ω—å 3:**
   - –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (100 –∏–∑ 100)
   - –°–∏—Å—Ç–µ–º–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ—Ç—å—é –∑–∞–ø–∏—Å—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º 20

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–ª–∞–Ω: 100 —à—Ç

–î–µ–Ω—å 1 (13.11.2025):
–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç: 50 —à—Ç
–ò—Å—Ç–æ—Ä–∏—è: [{"date": "2025-11-13", "quantity": 50, "timestamp": "..."}]

–î–µ–Ω—å 2 (14.11.2025):
–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç: 80 —à—Ç (–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–∫—Ç)
–î–µ–ª—å—Ç–∞: 80 - 50 = 30
–ò—Å—Ç–æ—Ä–∏—è: [
  {"date": "2025-11-13", "quantity": 50, "timestamp": "..."},
  {"date": "2025-11-14", "quantity": 30, "timestamp": "..."}
]

–î–µ–Ω—å 3 (15.11.2025):
–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç: 100 —à—Ç (–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–∫—Ç)
–î–µ–ª—å—Ç–∞: 100 - 80 = 20
–ò—Å—Ç–æ—Ä–∏—è: [
  {"date": "2025-11-13", "quantity": 50, "timestamp": "..."},
  {"date": "2025-11-14", "quantity": 30, "timestamp": "..."},
  {"date": "2025-11-15", "quantity": 20, "timestamp": "..."}
]
```

### 3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å
–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è:
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å –∑–∞ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
- –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏
- –ù–µ —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–º–µ—Ä:**
```
–£—Ç—Ä–æ 13.11: –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç 30 —à—Ç
–ò—Å—Ç–æ—Ä–∏—è: [{"date": "2025-11-13", "quantity": 30, "timestamp": "10:00:00"}]

–í–µ—á–µ—Ä 13.11: –û–ø–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –Ω–∞ 50 —à—Ç
–î–µ–ª—å—Ç–∞: 50 - 30 = 20
–ò—Å—Ç–æ—Ä–∏—è: [{"date": "2025-11-13", "quantity": 50, "timestamp": "10:00:00"}]
```

#### –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:
- –î–µ–ª—å—Ç–∞ –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π
- –ó–∞–ø–∏—Å—å –∑–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è
- –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞ –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ‚â§0, –∑–∞–ø–∏—Å—å —É–¥–∞–ª—è–µ—Ç—Å—è

**–ü—Ä–∏–º–µ—Ä:**
```
–ë—ã–ª–æ: fact_count = 80, –∏—Å—Ç–æ—Ä–∏—è –∑–∞ 14.11 = 30
–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç: 60 (–∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫—É)
–î–µ–ª—å—Ç–∞: 60 - 80 = -20
–ó–∞–ø–∏—Å—å –∑–∞ 14.11: 30 - 20 = 10 (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã

| –£—á–∞—Å—Ç–æ–∫ | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –¢–∞–±–ª–∏—Ü–∞ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---------|-------------|---------|------------|
| –£2 | `plan` | `corrugation_plan` | - |
| –£3 | `plan_u3` | `corrugation_plans` | –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ 's' –≤ –∫–æ–Ω—Ü–µ |
| –£5 | `plan_u5` | `corrugation_plan` | - |

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `add_history_field_migration.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `history`
- `run_history_migration.php` - PHP —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- `fix_u3_corrugation_table.php` - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–π –≤ –£3

#### API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏):**
- `plan/worker_modules/save_corr_fact.php`
- `plan_U3/worker_modules/save_corr_fact.php`
- `plan_U5/worker_modules/save_corr_fact.php`

**–ù–æ–≤—ã–µ API (–ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏):**
- `plan/worker_modules/get_corr_history.php`
- `plan_U3/worker_modules/get_corr_history.php`
- `plan_U5/worker_modules/get_corr_history.php`

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
- `plan/worker_modules/tasks_corrugation.php` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏
- `plan_U3/worker_modules/tasks_corrugation.php` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏
- `plan_U5/worker_modules/tasks_corrugation.php` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:**
   - –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–¥–∞–Ω–∏–π –≥–æ—Ñ—Ä–æ–º–∞—à–∏–Ω—ã (`tasks_corrugation.php`)
   - –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É
   - –í–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π –≤ –ø–æ–ª–µ "–§–∞–∫—Ç"
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚úì" (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏:**
   - –ù–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üìã" (–ò—Å—Ç–æ—Ä–∏—è) –≤ –Ω—É–∂–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
   - –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è:
     - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∑–∏—Ü–∏–∏
     - –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞—Ç–∞–º–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏
     - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π)
     - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ–±—â–µ–≥–æ —Ñ–∞–∫—Ç–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### API: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

**–ó–∞–ø—Ä–æ—Å:**
```
GET /plan/worker_modules/get_corr_history.php?id=123
GET /plan_U3/worker_modules/get_corr_history.php?id=123
GET /plan_U5/worker_modules/get_corr_history.php?id=123
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": 123,
    "order_number": "2025-001",
    "plan_date": "2025-11-13",
    "filter_label": "–§–∏–ª—å—Ç—Ä ABC",
    "plan_count": 100,
    "fact_count": 80,
    "history": [
      {
        "date": "2025-11-13",
        "quantity": 50,
        "timestamp": "2025-11-13 10:30:00"
      },
      {
        "date": "2025-11-14",
        "quantity": 30,
        "timestamp": "2025-11-14 09:15:00"
      }
    ],
    "stats": {
      "total_from_history": 80,
      "production_days": 2,
      "is_match": true
    }
  }
}
```

#### –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –ë–î:**
```sql
SELECT id, order_number, filter_label, history 
FROM corrugation_plan 
WHERE id = 123;
```

**–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```sql
UPDATE corrugation_plan 
SET history = '[{"date":"2025-11-13","quantity":50,"timestamp":"2025-11-13 10:00:00"}]'
WHERE id = 123;
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ —Å—Ä–æ–∫–æ–≤ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ–±—â–µ–≥–æ —Ñ–∞–∫—Ç–∞
4. **–ê—É–¥–∏—Ç:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **–ì–∏–±–∫–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ, —Ç–∞–∫ –∏ –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ò—Å—Ç–æ—Ä–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ–∞–∫—Ç–æ–º

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—è `fact_count` –≤ –ë–î –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏
2. –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ `save_corr_fact.php`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ `$todayIndex` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:**
```json
{
  "date": "2025-11-13",
  "quantity": 50,
  "timestamp": "2025-11-13 10:00:00",
  "user_id": 5,
  "user_name": "–ò–≤–∞–Ω–æ–≤ –ò.–ò."
}
```

2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–ø–∏—Å—è–º:**
```json
{
  "date": "2025-11-13",
  "quantity": 50,
  "timestamp": "2025-11-13 10:00:00",
  "comment": "–ü–µ—Ä–≤–∞—è –ø–∞—Ä—Ç–∏—è"
}
```

3. **–≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel/PDF
- –û—Ç—á–µ—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è

4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- –û–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–ª–∞–Ω–æ–≤—ã—Ö —Å—Ä–æ–∫–æ–≤
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 13 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0












