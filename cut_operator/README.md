# Модуль оператора бумагорезки

Централизованное рабочее место для оператора бумагорезки, которое объединяет задания на порезку со всех участков предприятия.

## Возможности

### Основные функции
- **Просмотр заданий** со всех участков (U2, U3, U4, U5) в едином интерфейсе
- **Отметка выполненных** заданий одним кликом
- **Фильтрация по дате** и участку
- **Просмотр просроченных** заданий с выделением критичности

### Интерфейс
- **Адаптивный дизайн** для мобильных устройств
- **Группировка по участкам** с подсчетом количества заданий
- **Детальный просмотр** каждой бухты с информацией о фильтрах
- **Цветовая индикация** статусов выполнения

## Структура данных

### Источники данных
Модуль подключается к следующим базам данных:
- `plan` (U2) - таблица `roll_plan`
- `plan_u3` (U3) - таблица `roll_plans` 
- `plan_u4` (U4) - таблица `roll_plans`
- `plan_u5` (U5) - таблица `roll_plans`

### Связанные таблицы
- `cut_plans` - детали фильтров для каждой бухты
- `orders` - информация о заявках

## Установка и настройка

### 1. Добавление роли
Выполните SQL скрипт для добавления роли оператора:
```sql
-- Выполнить файл: cut_operator/add_cut_operator_role.sql
```

### 2. Назначение роли пользователю
В админ панели назначьте роль `cut_operator` нужным пользователям.

### 3. Доступ к модулю
- Перейти на главную страницу `index.php`
- Нажать кнопку "Оператор бумагорезки" (доступна только для роли `cut_operator`)

## Функции

### Основные операции
- `markAsDone(id, department)` - отметка задания как выполненного
- `toggleDetails(id)` - раскрытие деталей бухты
- Фильтрация по дате, участку и статусу

### AJAX обработчики
- `POST action=mark_done` - отметка выполнения задания

## Технические особенности

### Безопасность
- Проверка авторизации через единую систему `auth`
- Проверка роли `cut_operator` при доступе
- Использование prepared statements для безопасности БД

### Производительность
- Оптимизированные SQL запросы с JOIN
- Кэширование подключений к БД
- Ленивая загрузка деталей

## Файловая структура
```
cut_operator/
├── index.php                    # Основной файл модуля
├── add_cut_operator_role.sql    # SQL скрипт добавления роли
└── README.md                   # Данная документация
```

## Интеграция с системой

### Связанные модули
- `laser_operator/` - аналогичный модуль для лазерной резки
- `plan/worker_modules/tasks_cut.php` - отдельные модули по участкам
- `plan_U5/worker_modules/tasks_cut.php` - отдельные модули по участкам

### Права доступа
- `admin` - полный доступ
- `director` - полный доступ  
- `cut_operator` - доступ к модулю






